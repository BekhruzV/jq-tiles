(function(){function e(e,t,n){var r=(new Array(++t-e)).join(".").split(".").map(function(t,n){return e+n});return n?r.map(function(e){return[Math.random(),e]}).sort().map(function(e){return e[1]}):r}$.fn.tiles=function(t){var n=$.extend({x:5,y:5,rand:!1,speed:400,effect:"default"},t);return this.each(function(){var t=$(this),r="tiles-"+n.effect;t.is("img")||$.error("Selector can only contain images.");var i=t.width(),s=t.height();t.wrap($('<div class="tiles-wrap"/>').width(i).height(s));var u=[];(new Array(n.x*n.y)).join(".").split(".").forEach(function(e,t){u.push('<div class="tiles-tile '+r+'-normal"/>')});var a=$(u.join(""));a.insertAfter(t),a.css({width:i/n.x,height:s/n.y,backgroundImage:"url("+t.attr("src")+")"}).each(function(){var e=$(this),t=e.position();e.css("backgroundPosition",-t.left+"px "+ -t.top+"px")}),t.on("toggleSlice",function(){var t=~~(n.speed/a.length);e(0,n.x*n.y,n.rand).forEach(function(e,n){setTimeout(function(){a.eq(e).toggleClass(r+"-toggle")},n*t)})}),t.hide()})}})();