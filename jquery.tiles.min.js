/*jshint expr:true */(function(){function e(e,t,n){var r=(new Array(++t-e)).join(".").split(".").map(function(t,n){return e+n});return n?r.map(function(e){return[Math.random(),e]}).sort().map(function(e){return e[1]}):r}var t={x:4,y:4,slider:!1,effect:"default",fade:!0,random:!1,reverse:!1,limit:!1,rewind:!1,loop:!0,effectSpeed:1e3,tileSpeed:!1,sliderSpeed:3e3,cssSpeed:300};$.fn.tiles=function(n){var r=$.extend({},t,n);return r.tileSpeed=r.tileSpeed||r.effectSpeed,$("body").addClass("tiles-preload"),$(window).load(function(){$("body").removeClass("tiles-preload")}),this.each(function(){var t=$(this),n="tiles-"+r.effect,i=r.x*r.y;t.is("img")||$.error("Selector can only contain images.");var s=$('<div class="tiles-wrap"/>'),u=[],a;(new Array(i)).join(".").split(".").forEach(function(e,t){u.push('<div class="tiles-tile '+(r.slider&&"tiles-slider ")+n+'-normal"/>')}),a=$(u.join("")),a.addClass("tiles-x"+r.x+" tiles-y"+r.y),a.filter(":odd").addClass("tiles-odd"),a.filter(":even").addClass("tiles-even"),s.insertAfter(t),s.append(t,a),t.one("load",function(){var e=t.width(),n=t.height();s.width(e).height(n),a.css({width:e/r.x,height:n/r.y,backgroundImage:"url("+t.attr("src")+")"}),a.each(function(){var e=$(this),t=e.position();e.css("backgroundPosition",-t.left+"px "+ -t.top+"px")})}),t[0].complete&&t.trigger("load");var f=[];t.on("toggleTiles",function(s,u){var f=~~(r.tileSpeed/i),l=e(0,i,r.random);if(r.limit){var c=l.length/(100/r.limit);r.reverse?l.splice(0,c):l.splice(c,l.length)}(r.reverse?l.reverse():l).forEach(function(e,t){function i(){a.eq(e).toggleClass(n+"-toggle")}setTimeout(i,t*f);if(r.rewind){var s=t*f+r.cssSpeed/(100/r.rewind);setTimeout(i,s)}}),u=u||$.noop,setTimeout(u(a,t),r.tileSpeed)}),t.hide()})},$.fn.tilesSlider=function(e){function o(){var e=s.filter(":first-child"),t=e.find("img");n.fade?e.delay(n.effectSpeed/2).fadeTo(n.effectSpeed,0).next().fadeTo(n.effectSpeed,1):e.delay(n.effectSpeed+n.cssSpeed).fadeTo(0,0).next().fadeTo(0,1),t.trigger("toggleTiles",function(e){e.parent().appendTo(r);if(!n.rewind){var s=i.index(t);setTimeout(function(){t.trigger("toggleTiles")},++s*n.effectSpeed+n.cssSpeed)}})}var n=$.extend({},t,e);n.slider=!0,n.rewind&&(n.fade=!0);var r=this;r.addClass("tiles-slider-wrap tiles-slider-"+n.effect+" tiles-slider-s"+n.cssSpeed);var i=r.find("img");i.tiles(n);var s=r.find(".tiles-wrap");s.fadeTo(0,0).first().fadeTo(0,1);var u;return r.on("start",function(e,t){u&&clearInterval(u),u=setInterval(o,n.sliderSpeed),o();var s=n.sliderSpeed*(i.length-1)+n.effectSpeed;n.loop||setTimeout(function(){r.trigger("stop")},s),t=t||$.noop,setTimeout(t,s)}),r.on("stop",function(){clearInterval(u)}),n.auto&&setTimeout(function(){r.trigger("start")},n.sliderSpeed),r}})();